{% extends "layout.html" %}
{% block title %}
  {{ get_localization("round_information_header") }}
{% endblock title %}
{% block content %}
  <h2>{{ round.coursename }}</h2>
  {% if session.user_id == round.creator_id %}
    <p>
      {{ components.edit_round_link(round.id) }}
      {{ components.delete_round_link(round.id) }}
    </p>
  {% endif %}
  <p>
    {{ get_localization("round_item_creator") }} {{ components.user_link(round.creator_id, round.participators[round.creator_id]) }}
  </p>
  <p>{{ components.round_start_with_header(round["start_time"]) }}</p>
  <p>
    {{ get_localization("round_item_players_participating") }} {{ round.participators.keys() |length }} / {{ round.num_players }}
  </p>
  {% set participating = session.user_id in round.participators.keys() %}
  {% if participating %}
    <a href="{{ url_for('show_hole', round_id=round.id, player_id=session.user_id, hole_num=1) }}" class="button">{{ get_localization("start_round_button") }}</a>
  {% endif %}
  <h3>{{ get_localization("sign_ups_header") }}</h3>
  <p>
    {% for k, v in round.participators.items() %}<li>{{ components.user_link(k, v) }}</li>{% endfor %}
  </p>
  {% if not participating and round.participators.keys()|length < round.num_players %}
    <form action="{{ url_for('round_sign_up') }}" method="post">
      {{ components.submit_button_with_localized_text("round_sign_up_button") }}
      {{ components.hidden_input("round_id", round.id) }}
      {{ components.csrf_token_input() }}
    </form>
  {% elif session.user_id != round.creator_id and participating %}
    <form action="{{ url_for('round_unparticipate') }}" method="post">
      {{ components.submit_button_with_localized_text("round_unparticipate_button") }}
      {{ components.hidden_input("round_id", round.id) }}
      {{ components.csrf_token_input() }}
    </form>
  {% endif %}
  {% if round_results %}
    <h3>{{ get_localization("round_view_score_board_header") }}</h3>
    {{ components.round_score_board(round, round_results, participating) }}
  {% endif %}
  {{ components.course_hole_information(round.num_holes, round.hole_data) }}
{% endblock content %}
